/*!
CalcNames: The AccName Computation Prototype, compute the Name and Description property values for a DOM node
Returns an object with 'name' and 'desc' properties.
Functionality mirrors the steps within the W3C Accessible Name and Description computation algorithm.
http://www.w3.org/TR/accname-aam-1.1/
Authored by Bryan Garaventa, plus refactoring contrabutions by Tobias Bengfort
https://github.com/whatsock/w3c-alternative-text-computation
Distributed under the terms of the Open Source Initiative OSI - MIT License
*/
!function(){var o=window.AccNamePrototypeNameSpace||window;o&&"string"==typeof o&&o.length&&(window[o]={},o=window[o]),o.getAccNameVersion="2.50",o.getAccName=o.calcNames=function(e,t,_,r){var ee=(r=r||{}).document||document,n={name:"",desc:"",error:""},d=!1,te=!1;try{if(!e||1!==e.nodeType)return n;function o(e,t){var r=t;if(-1!==r.indexOf("attr("))for(var n=r.match(/attr\((.|\n|\r\n)*?\)/g),o=0;o<n.length;o++){var a=n[o].slice(5,-1);a=e.getAttribute(a)||"",r=r.replace(n[o],a)}return r=r.replace(/url\((.*?)\)\s+\/|url\((.*?)\)/g,"").replace(/^\s+|\s+$/g,"").replace(/\"/g,"")}var re=e,a=Ne(e.getAttribute("role")||""),ne=[],oe=[],ae=function(U,z,F,J,K,X,Y){(Y=Y||{}).tag=Y.tag||!1,Y.role=Y.role||!1,Y.go=Y.go||!1;var e={name:"",title:""},Z=!1,l=function(e,t){for(var r=[];e;){if((e=e.id&&X[e.id]&&X[e.id].node&&-1===r.indexOf(e)?(r.push(e),X[e.id].node):e.parentNode)&&e===t)return!0;if(!e||e===X.top||e===ee.body)return!1}return!1},t={before:"",after:""};Y.tag||Y.role||-1!==ne.indexOf(U)||(t=Ae(U,null),_&&(-1===t.before.indexOf(" [ARIA] ")&&-1===t.before.indexOf(" aria-")&&-1===t.before.indexOf(" accName: ")||(t.before=""),-1===t.after.indexOf(" [ARIA] ")&&-1===t.after.indexOf(" aria-")&&-1===t.after.indexOf(" accDescription: ")||(t.after="")));var u=function(e,t,r){var n={name:"",title:""};if(!e)return n;var o=!(!e||1!==e.nodeType||!g(e)),a=e,i=t(e)||{};if(i.name&&i.name.length&&(n.name+=i.name),!i.skip&&!function(e,t){if(!t||!e||1!==t.nodeType||1!==e.nodeType)return!1;function r(e,t){var r=ue(e),n=e.nodeName.toLowerCase();return r&&0<=t.roles.indexOf(r)||!r&&0<=t.tags.indexOf(n)}return r(e,c)?e!==t||e.id&&X[e.id]&&X[e.id].node?!(l(e,X.top)&&"select"!==e.nodeName.toLowerCase()||r(t,f)):!de(e):!(!r(e,s)&&(e!==re||r(e,f))||Y.go)}(e,X.top))for(Y.go&&(Y.go=!1),e=e.firstChild;e;)n.name+=u(e,t,r).name,e=e.nextSibling;return n.name+=i.owns||"",re===a&&r===a&&!Ne(n.name)&&Ne(i.title)?n.name=ye(i.title):re===a&&r===a&&Ne(i.title)&&(n.title=ye(i.title)),re===a&&r===a&&Ne(i.desc)&&(n.title=ye(i.desc)),re===a&&r===a&&Ne(i.placeholder)&&!Ne(n.name)?(n.name=ye(i.placeholder),d=!0):re===a&&r===a&&Ne(i.placeholder)&&!Ne(n.title)&&(n.title=ye(i.placeholder)),(o||i.isWidget)&&(n.name=ye(n.name)),n};return e=u(U,function(e){var t=0,r=null,n=[],o=[],a={name:"",title:"",owns:"",skip:!1},i=!!(e&&1===e.nodeType&&J&&J.length&&-1!==J.indexOf(e)&&e===re&&e!==U),l=!1;if((F||!e||he(e,X.top))&&!K&&!i)return a;if(Y.tag||Y.role||-1!==ne.indexOf(e))return a;ne.push(e);var u="",d="",f={before:"",after:""},s=U===e?e:e.parentNode;if(Y.tag||Y.role||-1!==ne.indexOf(s)||(ne.push(s),f=Ae(s,U),_&&(-1===f.before.indexOf(" [ARIA] ")&&-1===f.before.indexOf(" aria-")&&-1===f.before.indexOf(" accName: ")||(f.before=""),-1===f.after.indexOf(" [ARIA] ")&&-1===f.after.indexOf(" aria-")&&-1===f.after.indexOf(" accDescription: ")||(f.after=""))),1===e.nodeType){var c=e.nodeName.toLowerCase(),g=ue(e),p=!Y.tag&&!Y.role&&e.getAttribute("aria-labelledby")||"",m=!Y.tag&&!Y.role&&e.getAttribute("aria-describedby")||"",b=!Y.tag&&!Y.role&&e.getAttribute("aria-label")||"",h=!Y.tag&&!Y.role&&e.getAttribute("title")||"",x=-1!==fe.indexOf(c),v=-1!==["input"].indexOf(c),y=-1!==se.indexOf(g),A=-1!==ce.indexOf(g),w=-1!==ge.indexOf(g),O=y||A||w||"combobox"===g,N=(O||-1!==pe.indexOf(g))&&"link"!==g;a.isWidget=x||N;var C=!1,S=!1,k=e.getAttribute("aria-owns")||"",T=!(Y.tag||Y.role||i||!(e!==U&&(x||O)||e.id&&X[e.id]&&X[e.id].target&&X[e.id].target===e));if(!z&&e===U&&!Y.tag&&!Y.role&&m){var L;for(n=m.split(/\s+/),o=[],t=0;t<n.length;t++)r=ee.getElementById(n[t]),o.push(ae(r,!0,!1,[e],!1,{ref:X,top:r}).name);L=Ne(o.join(" ")),Ne(L)&&(a.desc=L,S=!0)}if(!z&&!Y.tag&&!Y.role&&p){for(n=p.split(/\s+/),o=[],t=0;t<n.length;t++)r=ee.getElementById(n[t]),o.push(ae(r,!0,F,[e],r===U,{ref:X,top:r}).name);u=Ne(o.join(" ")),Ne(u)&&(Z=l=C=!0,a.skip=!0)}Y.tag||Y.role||C||!Ne(b)||T||Ne(u=b)&&(l=C=!0,e===U&&(Z=F=!0));var V=!Y.tag&&!Y.role&&!C&&g&&-1!==me.indexOf(g)&&!de(e)&&!be(e);if(!T){if(!Y.tag&&!Y.role&&!C&&e===U&&x){var j=ee.querySelectorAll("label"),q="",I=we(e,"label")||!1;for(t=0;t<j.length;t++)(j[t]!==I||"string"==typeof I.getAttribute("for"))&&j[t].getAttribute("for")!==e.id||xe(j[t],ee.body,!0)||(q+=ye(ae(j[t],!0,F,[e],!1,{ref:X,top:j[t]}).name));Ne(u=q)&&(C=!0)}var P=!Y.tag&&!Y.role&&v&&(e.getAttribute("type")||"").toLowerCase()||!1,R=!Y.tag&&!Y.role&&P&&Ne(e.getAttribute("value"))||!1,E=V&&"img"===c?"":Ne(e.alt||e.getAttribute("alt"));if(Y.tag||Y.role||C||V||"img"!==c&&"image"!==P||!E&&!Ne(h)||(u=Ne(E)||Ne(h),Ne(u)&&(C=!0)),Y.tag||Y.role||C||V||"area"!==c||!E||(u=Ne(E),Ne(u)&&(C=!0)),"optgroup"===c&&(Y.tag||Y.role||C||V||!e.getAttribute("label")||(u=Ne(e.getAttribute("label")),Ne(u)&&(C=!0)),a.skip=!0),!Y.tag&&!Y.role&&!C&&e===U&&P&&-1!==["button","submit","reset"].indexOf(P)){if(R)u=R;else switch(P){case"submit":u="submit";break;case"reset":u="reset";break;default:u=""}Ne(u)&&(C=!0)}if(!Y.tag&&!Y.role&&C&&e===U&&P&&-1!==["button","submit","reset"].indexOf(P)&&R&&R!==u&&!a.desc&&(a.desc=R,S=!0),Y.tag||Y.role||C||e!==U||!P||"image"!==P||(u="Submit Query",te=C=!0),!(Y.tag||Y.role||C||e!==re||"group"!==g&&"radiogroup"!==g&&(g||"fieldset"!==c))){var B=ie(e,["legend"],["legend"])||!1;B&&(u=Ne(ae(B,z,!1,[],!1,{ref:X,top:B}).name)),Ne(u)&&(C=!0),F=!0}if(Y.tag||Y.role||C||e!==re||"table"!==g&&(g||"table"!==c)||((B=ie(e,["caption"],["caption"])||!1)&&(u=Ne(ae(B,z,!1,[],!1,{ref:X,top:B}).name)),Ne(u)&&(C=!0),F=!0),Y.tag||Y.role||C||e!==re||"figure"!==g&&(g||"figure"!==c)||((B=ie(e,["figcaption"],["caption"])||le(e,["figcaption"],["caption"])||!1)&&(u=Ne(ae(B,z,!1,[],!1,{ref:X,top:B}).name)),Ne(u)&&(C=!0),F=!0),!Y.tag&&!Y.role&&"svg"===c){var D=e.querySelector("title")||!1,H=e===re&&e.querySelector("desc")||!1;if(!C&&D&&(u=Ne(ae(D,!0,!1,[],!1,{ref:X,top:D}).name)),!S&&H){var $=Ne(ae(H,!0,!1,[],!1,{ref:X,top:H}).name);Ne($)&&(a.desc=$)}a.skip=!0}}Y.tag||Y.role||!T||J&&J.length&&-1!==J.indexOf(e)||(y?u=ve(g,e,!0):A||"combobox"===g&&x?u=ve(g,e,!1,!0):w?u=ve(g,e,!1,!1,!0):!x||-1===["input","textarea"].indexOf(c)||N&&!A?!x||"select"!==c||N&&"combobox"!==g||(u=ve(g,e,!1,!1,!0,!0)):u=ve(g,e,!1,!1,!1,!0),u=Ne(u)),Y.tag||Y.role||V||!Ne(h)||(a.title=Ne(h));var M=x&&Ne(e.getAttribute("type")||"").toLowerCase();M=M||"text";var W=!Y.tag&&!Y.role&&e===re&&e===U&&(A||x&&("textarea"===c||"input"===c&&-1!==["password","search","tel","text","url","email"].indexOf(M)))&&Ne(e.getAttribute("placeholder")||e.getAttribute("aria-placeholder"));W&&(a.placeholder=W);var G=Y.role&&Y.role===g||!g&&Y.tag&&Y.tag===c;if(G&&(u=Ne(ae(e,z,!1,[],!1,{ref:X,top:e}).name),Ne(u)&&(F=!0)),!G&&k&&-1===["input","img","progress"].indexOf(c)){for(n=k.split(/\s+/),o=[],t=0;t<n.length;t++)if((r=ee.getElementById(n[t]))&&-1===oe.indexOf(n[t])){oe.push(n[t]);var Q={ref:X,top:X.top};Q[n[t]]={refNode:U,node:e,target:r},xe(r,ee.body,!0)||o.push(ae(r,!0,F,[],!1,Q).name)}d=o.join("")}}else Y.tag||Y.role||3!==e.nodeType||(u=e.data);return l||(u=f.before+u.replace(/\s+/g," ")+f.after),u.length&&!Oe(e,X.top,X)&&(a.name=u),a.owns=d,a},U),Z||(e.name=t.before+e.name.replace(/\s+/g," ")+t.after),e},ie=function(e,t,r,n){for(e=e?e.firstChild:null;e;){var o=ue(e)||!1;if(1===e.nodeType&&(!t&&!r||o&&r&&-1!==r.indexOf(o)||!o&&t&&-1!==t.indexOf(e.nodeName.toLowerCase())))return e;if(!n&&1===e.nodeType&&(t||r))return null;e=e.nextSibling}return e},le=function(e,t,r,n){for(e=e?e.lastChild:null;e;){var o=ue(e)||!1;if(1===e.nodeType&&(!t&&!r||o&&r&&-1!==r.indexOf(o)||!o&&t&&-1!==t.indexOf(e.nodeName.toLowerCase())))return e;if(!n&&1===e.nodeType&&(t||r))return null;e=e.previousSibling}return e},ue=function(e){var t=e&&e.getAttribute?(e.getAttribute("role")||"").toLowerCase():"";if(!Ne(t))return"";function r(e){return 0<Ne(t).length&&0<=e.roles.indexOf(t)}for(var n=t.split(/\s+/),o=0;o<n.length;o++)if(t=n[o],r(f)||r(s)||r(c)||r(i)||-1!==me.indexOf(t))return t;return""},de=function(e){var t=e.nodeName.toLowerCase();return!!e.getAttribute("tabindex")||(!("a"!==t||!e.getAttribute("href"))||-1!==["button","input","select","textarea"].indexOf(t)&&"hidden"!==(e.getAttribute("type")||"").toLowerCase())},f={roles:["button","checkbox","link","option","radio","switch","tab","treeitem","menuitem","menuitemcheckbox","menuitemradio","row","cell","gridcell","columnheader","rowheader","tooltip","heading"],tags:["a","button","summary","input","h1","h2","h3","h4","h5","h6","menuitem","option","tr","td","th"]},s={roles:["application","alert","log","marquee","timer","alertdialog","dialog","banner","complementary","form","main","navigation","region","search","article","document","feed","figure","img","math","toolbar","menu","menubar","grid","listbox","radiogroup","textbox","searchbox","spinbutton","scrollbar","slider","tablist","tabpanel","tree","treegrid","separator","rowgroup","group"],tags:["article","aside","body","select","datalist","optgroup","dialog","figure","footer","form","header","hr","img","textarea","input","main","math","menu","nav","section","thead","tbody","tfoot","fieldset"]},c={roles:["term","definition","directory","list","note","status","table","contentinfo"],tags:["dl","ul","ol","dd","details","output","table"]},i={roles:["legend","caption"],tags:["legend","caption","figcaption"]},fe=["button","input","select","textarea"],se=["scrollbar","slider","spinbutton"],ce=["searchbox","textbox"],ge=["grid","listbox","tablist","tree","treegrid"],pe=["button","checkbox","link","switch","option","menu","menubar","menuitem","menuitemcheckbox","menuitemradio","radio","tab","treeitem","gridcell"],me=["presentation","none"],be=function(e){for(var t=["labelledby","label","describedby","busy","controls","current","details","disabled","dropeffect","errormessage","flowto","grabbed","haspopup","invalid","keyshortcuts","live","owns","roledescription"],r=0;r<t.length;r++){if(Ne(e.getAttribute("aria-"+t[r])))return!0}return!1},he=r.isHidden||function(e,r){return function(e){if(!e||1!==e.nodeType||e===r)return!1;if("true"===e.getAttribute("aria-hidden"))return!0;if(e.getAttribute("hidden"))return!0;var t=l(e);return"none"===t.display||"hidden"===t.visibility}(e)},xe=function(e,t,r,n){for(;e&&e!==t;){if(!n&&1===e.nodeType&&he(e,t))return!0;n=!1,e=e.parentNode}return!1},l=r.getStyleObject||function(e){var t={};return ee.defaultView&&ee.defaultView.getComputedStyle?t=ee.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),t},g=function(e,t){var r=t||l(e);for(var n in u)for(var o=u[n],a=0;a<o.length;a++)if(r[n]&&(0===o[a].indexOf("!")&&-1===[o[a].slice(1),"inherit","initial","unset"].indexOf(r[n])||0===r[n].indexOf(o[a])))return!0;return!t&&e.nodeName&&-1!==p.indexOf(e.nodeName.toLowerCase())&&!(r.display&&0===r.display.indexOf("inline")&&"br"!==e.nodeName.toLowerCase())},u={display:["block","grid","table","flow-root","flex"],position:["absolute","fixed"],float:["left","right","inline"],clear:["left","right","both","inline"],overflow:["hidden","scroll","auto"],"column-count":["!auto"],"column-width":["!auto"],"column-span":["all"],contain:["layout","content","strict"]},p=["address","article","aside","blockquote","br","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","legend","li","main","nav","noscript","ol","output","p","pre","section","table","td","tfoot","th","tr","ul","video"],ve=function(e,t,r,n,o,a){var i="",l=!1;if(r&&!a)i=t.getAttribute("aria-valuetext")||t.getAttribute("aria-valuenow")||"";else if(n&&!a)i=h(t)||"";else if(o&&!a){var u=[];"grid"===e||"treegrid"===e?u=["gridcell","rowheader","columnheader"]:"listbox"===e?u=["option"]:"tablist"===e?u=["tab"]:"tree"===e&&(u=["treeitem"]),i=m(t,t.querySelectorAll('*[aria-selected="true"]'),!1,u),l=!0}return!(i=Ne(i))&&(r||n)&&t.value&&(i=t.value),l||i||!a||(i=o?m(t,t.querySelectorAll("option[selected]"),!0):t.value),i},ye=function(e){return Ne(e).length?" "+e+" ":" "},m=function(e,t,r,n){if(!t||!t.length)return"";for(var o=[],a=0;a<t.length;a++){var i=ue(t[a]);(!n||-1!==n.indexOf(i))&&o.push(r?h(t[a]):ae(t[a],!0,!1,[],!1,{top:t[a]}).name)}return o.join(" ")},b=r.getPseudoElStyleObj||function(e,t){var r={};for(var n in u)r[n]=ee.defaultView.getComputedStyle(e,t).getPropertyValue(n);return r.content=ee.defaultView.getComputedStyle(e,t).getPropertyValue("content").replace(/^"|\\|"$/g,""),r},h=function(e,t){if(!t&&1===e.nodeType)return e.innerText||e.textContent||"";var r=b(e,t),n=r.content;return n&&"none"!==n?(g({},r)&&(":before"===t?n+=" ":":after"===t&&(n=" "+n)),n):""},Ae=r.getCSSText||function(e,t){return e&&1!==e.nodeType||e===t||-1!==["input","select","textarea","img","iframe","optgroup"].indexOf(e.nodeName.toLowerCase())?{before:"",after:""}:{before:o(e,h(e,":before")),after:o(e,h(e,":after"))}},we=function(e,t,r,n){for(n=!!n;e;)if((e=e.parentNode)&&(r&&ue(e)===r||t&&e.nodeName&&e.nodeName.toLowerCase()===t&&(!n||ue(e).length<1)))return e;return{}},Oe=function(e,t,r,n){for(var o=[];e&&e!==t;)if((e=e.id&&r&&r[e.id]&&r[e.id].node&&-1===o.indexOf(e)?(o.push(e),r[e.id].node):e.parentNode)&&e.getAttribute&&(Ne(e.getAttribute("aria-label"))||!n&&he(e,t)))return!0;return!1};if(xe(e,ee.body,!0,!(!e||!e.nodeName||"area"!==e.nodeName.toLowerCase())))return n;var x=ae(e,!1,!1,[],!1,{top:e}),v=Ne(x.name.replace(/\s+/g," ")),y=Ne(x.title.replace(/\s+/g," "));v===y&&(y=""),n.hasUpperCase=!(!a||a===a.toLowerCase()),n.name=v,n.desc=y,ne=[],oe=[]}catch(e){n.error=e}return n.placeholder=d,n.userAgent=te,t&&"function"==typeof t?t.apply(e,[n,e]):n};var Ne=function(e){return"string"!=typeof e?"":e.replace(/^\s+|\s+$/g,"")};o.getAccNameMsg=o.getNames=function(e,t){var r=o.getAccName(e,null,!1,t);if(r.error)return r.error+"\n\nAn error has been thrown in AccName Prototype version "+o.getAccNameVersion+". Please copy this error message and the HTML markup that caused it, and submit both as a new GitHub issue at\nhttps://github.com/whatsock/w3c-alternative-text-computation";var n='accName: "'+r.name+'"\n\naccDesc: "'+r.desc+'"\n\n';return r.placeholder&&(n+="Name from placeholder: true\n\n"),r.userAgent&&(n+="Name from user agent: true\n\n"),n+="(Running AccName Computation Prototype version: "+o.getAccNameVersion+")"},"object"==typeof module&&module.exports&&(module.exports={getNames:o.getNames,calcNames:o.calcNames})}();